---
redmine_domain: redmine.local
redmine_hostname: "{{ redmine_domain }}"

## --------------------
## Redmineのバージョン
## --------------------
redmine_version: 5.1-stable

## --------------------
## 追加インストールするgemパッケージ
## --------------------
redmine_gemfile_local_packages:
  yard:
  rails-erd:

## --------------------
## config/configuration.ymlの設定
## --------------------
redmine_cfg:
  default:
    sudo_mode: true
    sudo_mode_timeout: 15
    ## メール送信設定
    email_delivery:
      delivery_method: :smtp
      smtp_settings:
        address: localhost
        port: 1025

## --------------------
## インストールするテーマ
## --------------------
redmine_themes:
  PurpleMine2:
    repo: https://github.com/mrliptontea/PurpleMine2.git
    version: master
  bleuclair:
    repo: https://github.com/farend/redmine_theme_farend_bleuclair.git
    version: master
  farend_fancy:
    repo: https://github.com/farend/redmine_theme_farend_fancy.git
    version: master
  farend_basic:
    repo: https://github.com/farend/redmine_theme_farend_basic.git
    version: master
  gitmike:
    repo: https://github.com/makotokw/redmine-theme-gitmike.git
    version: master

## --------------------
## インストールするプラグイン
## --------------------
redmine_plugins:
  view_customize:
    repo: https://github.com/onozaty/redmine-view-customize.git
    version: master
  redmine_issue_templates:
    repo: https://github.com/agileware-jp/redmine_issue_templates.git
    version: master
  redmine_message_customize:
    repo: https://github.com/farend/redmine_message_customize.git
    version: master
  redmine_messenger:
    repo: https://github.com/alphanodes/redmine_messenger.git
    version: main
  redmine_dashboard:
    repo: https://github.com/jgraichen/redmine_dashboard.git
    version: main
  redmine_drawio:
    repo: https://github.com/mikitex70/redmine_drawio.git
    version: master
  redmica_ui_extension:
    repo: https://github.com/redmica/redmica_ui_extension.git
    version: master
  redmine_dmsf:
    repo: https://github.com/danmunn/redmine_dmsf.git
    version: master
    required_packages:
      # CGI search interface and indexers using Xapian
      - xapian-omega
      # Xapian 検索エンジンライブラリ用開発ファイル
      - libxapian-dev
      # Xapian search engine interface for Ruby
      - ruby-xapian
      # Converts MS Word files to text, PS, PDF and XML
      - antiword
      # text extractor for MS-Office files
      - catdoc
      # PDF 向けユーティリティ
      - poppler-utils
      # Universally Unique Identifier Command-Line Tool
      - uuid
      # LibreOffice
      - libreoffice
    # cron_job:
    #   cmd: cd {{ redmine_root }} && XAPIAN_CJK_NGRAM=true ruby plugins/redmine_dmsf/extra/xapian_indexer.rb -v
    #   minute: 10
  redmine_toggl:
    repo: https://github.com/ozguryazilimas/redmine_toggl.git
    version: master
  additionals:
    repo: https://github.com/AlphaNodes/additionals.git
    version: main
  redmine_sudo:
    repo: https://github.com/AlphaNodes/redmine_sudo.git
    version: main
  redmine_hedgedoc:
    repo: https://github.com/alphanodes/redmine_hedgedoc.git
    version: main
  redmine_oauth:
    repo: https://github.com/kontron/redmine_oauth.git
    version: main
  # redmine_saml:
  #   repo: https://github.com/alphanodes/redmine_saml.git
  #   version: main

## --------------------
## Redmineのデータベース設定(config/database.yml)
## --------------------
redmine_db_cfg:
  production:
    adapter: mysql2
    database: redmine
    host: localhost
    username: redmine_user
    password: redmine_password
    encoding: utf8mb4
  hedgedoc:
    adapter: mysql2
    database: hedgedoc
    host: localhost
    username: hedgedoc_user
    password: hedgedoc_password
    encoding: utf8mb4

## --------------------
## デフォルトのシステム管理者
## --------------------
# redmine_reimport_admin: true
redmine_admin:
  login: admin
  firstname: 管理者
  lastname: システム
  mail: admin@example.com
  language: ja
  password: password
  must_change_passwd: false
  mail_notification: none

## --------------------
## チケットのステータス
## --------------------
# redmine_reimport_status: true
redmine_statuses:
  - name: 未対応
    id: 1
    position: 1
    ## この項目はテーブルには存在しません、以下の内容はWellcomeメッセージに出力するテキストです
    description: |
      何も対応を行っていない状態を表しています
  - name: 対応中
    id: 2
    position: 2
    description: |
      対応を行っている最中の状態を表しています
  - name: 対応済み
    id: 3
    position: 3
    description: |
      いったん対応が終わった状態を表しています。
      ただし、検証などは完了していないため、チケット自体は完了していない状態を表しています。
  - name: 確認待ち
    position: 4
    description: |
      不明点の確認を行っている状態を表しています。
  - name: フィードバック
    position: 5
    description: |
      質問に対する回答を行った状態を表しています。
  - name: 経過観察
    position: 6
    description: |
      * タスク：実装および検証は終わったが、しばらく様子見が必要といった状態を表しています
          * 例：機能の実装後にABテストを実施している
      * 不具合：何らかの理由により様子見を行っている状態を表しています。
          * 例：対応を行う必要があるが、事象が再現しないため原因が特定しきれない
      * 運用保守：何らかの理由により様子見を行っている状態を表しています。
          * 例：依存パッケージのアップデートがあったが、影響範囲の確認が必要になるため適用を様子見している
  - name: 保留
    position: 7
    description: |
      何らかの理由により対応を保留にしている状態を表しています。
      ※「種別」が「要望」以外のチケットについては、「管理者」権限を有する人のみ設定できます。
  - name: 完了
    id: 5
    position: 8
    description: |
      チケットの対応がすべて終わり対応が完了した状態を表しています。
  - name: 破棄
    id: 6
    position: 9
    description: |
      何らかの理由によりチケットの対応を行わずに終了した状態を表しています。

## --------------------
## トラッカー
## --------------------
# redmine_reimport_tracker: true
redmine_trackers:
  - name: 要望
    description: |
      対応するかどうかが決まっていないチケットです。
      思いついたことなどはこの種別を設定し気軽にチケットとして登録しましょう。
    position: 1
    enabled_standard_fields:
      - description
      - assigned_to_id
      - start_date
      - due_date
      - category_id
      - parent_issue_id
      - priority_id
    is_in_roadmap: false
    copy_workflow_from: タスク
  - name: タスク
    description: |
      対応することが確定したチケットです。
      主に機能追加や機能改善はこの種別を設定します。
    id: 2
    position: 2
  - name: 不具合
    id: 1
    description: |
      不具合に関するチケットです。
      システムの不具合だけでなく、見た目の表示崩れなどもこの種別を設定します。
    position: 3
  - name: 運用保守
    id: 3
    description: |
      運用保守作業に関するチケットです。
      依存パッケージの更新やセキュリティアップデート、技術的負債の解消、
      ドキュメントのメンテナンスといった内容はこの種別を設定します。
    position: 4
    is_in_roadmap: false
  - name: 問い合わせ
    description: |
      他部署などからの問い合わせに関するチケットです。
      なるべく速やかに質問者(登録者)に回答をしてあげましょう。
    position: 5
    enabled_standard_fields:
      - description
      - assigned_to_id
      - start_date
      - due_date
      - priority_id
    is_in_roadmap: false
    copy_workflow_from: タスク
  - name: その他
    description: |
      メイン業務以外の間接業務はこの種別を設定してください。
    position: 6
    enabled_standard_fields:
      - description
      - assigned_to_id
      - start_date
      - due_date
      - priority_id
    is_in_roadmap: false
    copy_workflow_from: タスク

## --------------------
## ロール
## --------------------
# redmine_reimport_role: true
redmine_roles:
  - name: 管理者
    id: 3
    ## 権限
    append_permissions:
      ## チケットテンプレート
      # テンプレートの編集
      - edit_issue_templates
      # テンプレートの表示
      - show_issue_templates
      # テンプレートの管理
      - manage_issue_templates
      ## Additionals
      # ダッシュボードの共有
      - share_dashboards
      # ダッシュボードの保存
      - save_dashboards
      ## ダッシュボード
      # ダッシュボードの表示
      - view_dashboards
      # ダッシュボードの設定
      - configure_dashboards
      # 終了済みチケットの作業時間の入力
      - log_time_on_closed_issues
      ## Webhooks
      # Manage hook
      - manage_hook
      ## DMSF(ドキュメント管理)
      # ダウンロード履歴の表示
      - view_dmsf_file_revision_accesses
      # リビジョン履歴の表示
      - view_dmsf_file_revisions
      # ファイルの一覧
      - view_dmsf_folders
      # ユーザー設定
      - user_preferences
      # ファイルの表示
      - view_dmsf_files
      # 文書をメールで送信
      - email_documents
      # フォルダ操作
      - folder_manipulation
      # ファイル操作
      - file_manipulation
      # ファイルの削除
      - file_delete
      # ファイルの強制ロック解除
      - force_file_unlock
      # ファイルの承認
      - file_approval
      # ワークフローの管理
      - manage_workflows
      ## HedgeDoc
      # Show HedgeDoc pads
      - show_hedgedoc_pads
      # Import HedgeDoc pads
      - import_hedgedoc_pads
  - name: 開発者
    id: 4
    append_permissions:
      ## プロジェクト
      # プロジェクトの編集
      - edit_project
      # モジュールの選択
      - select_project_modules
      ## チケットトラッキング
      # チケットのコピー
      - copy_issues
      # チケットのインポート
      - import_issues
      # 自分が追加したチケットの編集
      - edit_own_issues
      # 自分が追加したチケットのプライベート設定
      - set_own_issues_private
      # 自分が追加したコメントの編集
      - edit_own_issue_notes
      ## 文書
      # 文書の追加
      - add_documents
      # 文書の編集
      - edit_documents
      # 文書の削除
      - delete_documents
      ## 時間管理
      # 自分の作業時間の編集
      - edit_own_time_entries
      # 作業時間のインポート
      - import_time_entries
      ## Wiki
      # Wikiページ名の変更
      - rename_wiki_pages
      # Wikiページの保護
      - protect_wiki_pages
      # 添付ファイルの削除
      - delete_wiki_pages_attachments
      ## チケットテンプレート
      # テンプレートの編集
      - edit_issue_templates
      # テンプレートの表示
      - show_issue_templates
      # テンプレートの管理
      - manage_issue_templates
      ## Additionals
      # ダッシュボードの保存
      - save_dashboards
      ## ダッシュボード
      # ダッシュボードの表示
      - view_dashboards
      # 終了済みチケットの作業時間の入力
      - log_time_on_closed_issues
      ## DMSF(ドキュメント管理)
      # ダウンロード履歴の表示
      - view_dmsf_file_revision_accesses
      # リビジョン履歴の表示
      - view_dmsf_file_revisions
      # ファイルの一覧
      - view_dmsf_folders
      # ユーザー設定
      - user_preferences
      # ファイルの表示
      - view_dmsf_files
      # 文書をメールで送信
      - email_documents
      # フォルダ操作
      - folder_manipulation
      # ファイル操作
      - file_manipulation
      # ファイルの削除
      - file_delete
      # ファイルの承認
      - file_approval
      ## HedgeDoc
      # Show HedgeDoc pads
      - show_hedgedoc_pads
      # Import HedgeDoc pads
      - import_hedgedoc_pads
  - name: 報告者
    id: 5
    ## 権限
    append_permissions:
      ## チケットテンプレート
      # テンプレートの表示
      - show_issue_templates
      ## チケットトラッキング
      # 自分が追加したチケットの編集
      - edit_own_issues
      # 自分が追加したコメントの編集
      - edit_own_issue_notes
      ## 時間管理
      # 自分の作業時間の編集
      - edit_own_time_entries
      ## DMSF(ドキュメント管理)
      # ダウンロード履歴の表示
      - view_dmsf_file_revision_accesses
      # リビジョン履歴の表示
      - view_dmsf_file_revisions
      # ファイルの一覧
      - view_dmsf_folders
      # ファイルの表示
      - view_dmsf_files
      ## HedgeDoc
      # Show HedgeDoc pads
      - show_hedgedoc_pads

## --------------------
## チケットの優先度
## --------------------
# redmine_reimport_priority: true
redmine_priorities:
  - name: 低い
    id: 1
  - name: 通常
    id: 2
    is_default: true
  - name: 高い
    id: 3
  - name: 早急に
    id: 4
  - name: 緊急
    id: 5

## --------------------
## 文書カテゴリ
## --------------------
# redmine_reimport_document_category: true
redmine_document_categories:
  - name: ユーザーマニュアル
    id: 6
  - name: 開発ドキュメント
    id: 7

## --------------------
## 作業分類
## --------------------
# redmine_reimport_time_entry_activity: true
redmine_time_entry_activities:
  - name: 調査
    position: 1
  - name: 要件定義
    position: 2
  - name: 設計
    id: 8
    position: 3
  - name: コーディング
    id: 9
    position: 4
  - name: テスト
    position: 5
  - name: ドキュメント
    position: 6
  - name: 打ち合わせ
    position: 7
  - name: その他
    position: 8

## --------------------
## チケットのカスタムフィールド
## --------------------
# redmine_reimport_issue_custom_field: true
redmine_issue_custom_fields:
  - name: 理由
    field_format: string
    description: ステータス変更時の理由を記載します
    visible: true
    searchable: false
    is_filter: false
    trackers:
      - 要望
      - タスク
      - 不具合
      - 運用保守
      - 問い合わせ
      - その他

## --------------------
## プロジェクトのカスタムフィールド
## --------------------
# redmine_reimport_project_custom_field: true
redmine_project_custom_fields:
  - name: 管理画面URL
    field_format: link
    description: 管理画面のURLを設定します
    visible: true

## --------------------
## ユーザーのカスタムフィールド
## --------------------
# redmine_reimport_user_custom_field: true
redmine_user_custom_fields:
  - name: 電話番号
    field_format: string
    description: 日中連絡先の電話番号を設定します
    visible: true
  - name: Githubアカウント
    field_format: string
    description: Githubのアカウント名を設定します。
    visible: true
    url_pattern: https://github.com/%value%
  - name: 自己紹介
    field_format: text
    visible: true
  - name: 性格タイプ(MBTI)
    field_format: list
    description: |
      16personalities(MBTI)の性格タイプを設定します。
      https://www.16personalities.com/ja
    visible: true
    possible_values:
      - INTJ
      - INTP
      - ENTJ
      - ENTP
      - INFJ
      - INFP
      - ENFJ
      - ENFP
      - ISTJ
      - ISFJ
      - ESTJ
      - ESFJ
      - ISTP
      - ISFP
      - ESTP
      - ESFP
    url_pattern: https://www.16personalities.com/ja/%value%%E5%9E%8B%E3%81%AE%E6%80%A7%E6%A0%BC
  - name: キャリア・アンカー(専門・職能別能力)
    field_format: list
    visible: true
    description: 価値観の大きさに応じて10段階で指定してください
    possible_values: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
  - name: キャリア・アンカー(管理能力)
    field_format: list
    visible: true
    description: 価値観の大きさに応じて10段階で指定してください
    possible_values: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
  - name: キャリア・アンカー(自律・独立)
    field_format: list
    visible: true
    description: 価値観の大きさに応じて10段階で指定してください
    possible_values: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
  - name: キャリア・アンカー(保証・安定)
    field_format: list
    visible: true
    description: 価値観の大きさに応じて10段階で指定してください
    possible_values: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
  - name: キャリア・アンカー(起業家的創造性)
    field_format: list
    visible: true
    description: 価値観の大きさに応じて10段階で指定してください
    possible_values: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
  - name: キャリア・アンカー(奉仕・社会貢献)
    field_format: list
    visible: true
    description: 価値観の大きさに応じて10段階で指定してください
    possible_values: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
  - name: キャリア・アンカー(純粋な挑戦)
    field_format: list
    visible: true
    description: 価値観の大きさに応じて10段階で指定してください
    possible_values: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
  - name: キャリア・アンカー(ライフワークバランス)
    field_format: list
    visible: true
    description: 価値観の大きさに応じて10段階で指定してください
    possible_values: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
  - name: ログイン後の遷移先
    field_format: string
    description: ログイン後のURLを「/」で始まるURLで指定します。
    regexp: "^/+"
    visible: false

## --------------------
## Redmineの設定
## --------------------
# redmine_reimport_setting: true
redmine_settings:
  ## --------------------
  ## Redmine本体の設定
  ## --------------------
  ### ----------
  ### 全般
  ### ----------
  # ホスト名とパス
  # host_name: "{{ inventory_hostname }}"
  # プロトコル
  protocol: http
  # テキスト書式
  text_formatting: common_mark
  # ウェルカムメッセージ
  welcome_text: "{{ lookup('file', 'files/welcome.md') }}"
  ### ----------
  ### 表示
  ### ----------
  # テーマ
  ui_theme: gitmike
  # デフォルトの言語
  default_language: ja
  # 時間の形式
  timespan_format: decimal
  # ユーザー名の表示形式
  user_format: lastname_firstname
  # 新規オブジェクト作成タブ：「新しいチケット」タブを表示
  new_item_menu_tab: 1
  ### ----------
  ### 認証
  ### ----------
  # 認証が必要
  login_required: 1
  # 自動ログイン
  autologin: 30
  ### ----------
  ### API
  ### ----------
  # RESTによるWebサービスを有効にする
  rest_api_enabled: 1
  ### ----------
  ### プロジェクト
  ### ----------
  # デフォルトで新しいプロジェクトは公開にする
  default_projects_public: 0
  # 新規プロジェクトにおいてデフォルトで有効になるモジュール
  default_projects_modules:
    # チケットトラッキング
    - issue_tracking
    # 時間管理
    - time_tracking
    # ニュース
    - news
    # ファイル
    # - files
    # Wiki
    - wiki
    # カレンダー
    - calendar
    # ガントチャート
    # - gantt
    # チケットテンプレート
    - issue_templates
    # ダッシュボード
    - dashboard
    # DMSF
    - dmsf
    # HedgeDoc
    - hedgedoc
  # 新規プロジェクトにおいてデフォルトで有効になるトラッカー
  default_projects_trackers:
    - 要望
    - タスク
    - 不具合
    - 運用保守
    - 問い合わせ
    - その他
  # システム管理者以外のユーザーが作成したプロジェクトに設定するロール
  new_project_user_role: 管理者
  ### ----------
  ### ユーザー
  ### ----------
  # 新しいユーザーのデフォルト設定(タイムゾーン)
  default_users_time_zone: Tokyo
  ### ----------
  ### チケットトラッキング
  ### ----------
  # チケットをコピーしたときに関連を設定
  link_copied_issue: ask
  # 現在の日付を新しいチケットの開始日とする
  default_issue_start_date_to_creation_date: 0
  # チケットの一覧で表示する項目
  issue_list_default_columns:
    # トラッカー
    - tracker
    # 優先度
    - priority
    # 題名
    - subject
    # ステータス
    - status
    # 進捗率
    - done_ratio
    # 担当者
    - assigned_to
    # 期日
    - due_date
    # 更新日
    - updated_on
  ### ----------
  ### ファイル
  ### ----------
  # 添付ファイルサイズの上限(KB)
  attachment_max_size: 10240
  # 添付ファイルとリポジトリのエンコーディング
  repositories_encodings: "utf-8,cp932,euc-jp"
  ### ----------
  ### メール通知
  ### ----------
  # 送信元メールアドレス
  mail_from: "redmine@{{ redmine_domain }}"
  ## --------------------
  ## プラグインの設定
  ## --------------------
  ### ----------
  ### Additionals
  ### ----------
  plugin_additionals:
    # 無効にするモジュール
    disabled_modules:
      - repository
    # ツールバーで無効にするマクロ
    hidden_macros_in_toolbar:
      - drawio
      - reddit
      - redmine_issue
      - redmine_wiki
    # 新規チケットのメモ
    new_ticket_message: |
      何をしてほしいかだけでなく、その理由や背景もきちんと記載しましょう。
      また、何をもって完了とみなすのかの達成条件もきちんと記載するようにしましょう。
      (追加の要望などが出てきた場合は現在のチケットに追記するのではなく新たにチケットを登録して対応してもらいましょう)
    # プロフィール画面に「新しいチケット」を表示する
    new_issue_on_profile: 1
    # チケットのステータスをサイドバーに表示する
    issue_change_status_in_sidebar: 1
    # 終了したチケットの編集を禁止する
    issue_freezed_with_close: 1
    # issue_status_change: 0
    # issue_status_x: []
    # issue_status_y: null
    # issue_current_user_status: 0
    # issue_assign_to_x: []
    # issue_auto_assign: 0
    # issue_auto_assign_status: []
    # issue_auto_assign_role: null
    # issue_timelog_required: 0
    # issue_timelog_required_tracker: []
    # issue_timelog_required_status: []
  ### ----------
  ### RedMica UI extension
  ### ----------
  plugin_redmica_ui_extension:
    # セレクトボックスを検索可能にする
    searchable_selectbox:
      enabled: 0
  ### ----------
  ### チケットテンプレート
  ### ----------
  plugin_redmine_issue_templates:
    # グローバルチケットテンプレートを全てのプロジェクトに適用
    apply_global_template_to_all_projects: "true"
  ### ----------
  ### メッセンジャー
  ### ----------
  plugin_redmine_messenger:
    # チケットの更新
    post_updates: 1
    # チケット作成時に説明を含める
    new_include_description: 1
    # チケット更新時に説明を含める
    updated_include_description: 1
    # Wikiの作成
    post_wiki: 1
    # Wikiの更新
    post_wiki_updates: 1
  ### ----------
  ### DMSF(文書管理)
  ### ----------
  plugin_redmine_dmsf:
    ## 物理ファイルの削除
    # dmsf_really_delete_files: 0
    ## Sub-projects as sub-folders
    # dmsf_projects_as_subfolders: 0
    ## Global DMS menu disabled
    dmsf_global_menu_disabled: "true"
    ## DMS Columns
    dmsf_columns:
      - title
      - size
      - modified
      - version
      - author
    ## 送信者
    dmsf_documents_email_from: redmine@redmine.local
    ## WebDAV
    dmsf_webdav: 0
    ## 語幹抽出する言語
    dmsf_stemming_lang: english
    ## CJKテキストから n-grams の生成を有効にする
    dmsf_enable_cjk_ngrams: "true"
  ### ----------
  ### HedgeDoc
  ### ----------
  plugin_redmine_hedgedoc:
    hedgedoc_url: http://localhost:3000
    hedgedoc_in_menu: top

## --------------------
## ワークフロー
## --------------------
# redmine_reimport_workflow: true
redmine_workflows:
  ## ----------
  ## 管理者
  ## ----------
  ### 種別：要望
  - roles: [管理者]
    trackers: [要望]
    transitions:
      - from: 未対応
        to: [確認待ち, 保留, 破棄]
      - from: 確認待ち
        to: [フィードバック, 保留, 破棄]
      - from: フィードバック
        to: [未対応, 確認待ち, 保留, 破棄]
      - from: 保留
        to: [未対応, 確認待ち, 破棄]
      - from: 破棄
        to: [未対応, 確認待ち, 保留]
  ### 種別：タスク
  - roles: [管理者]
    trackers: [タスク]
    transitions:
      - from: 未対応
        to: [対応中, 対応済み, 確認待ち, 保留, 破棄]
      - from: 対応中
        to: [未対応, 対応済み, 確認待ち]
      - from: 対応済み
        to: [対応中, 確認待ち, 完了]
      - from: 確認待ち
        to: [未対応, 対応中, フィードバック, 保留, 経過観察, 完了, 破棄]
      - from: 経過観察
        to: [対応中, 完了]
      - from: フィードバック
        to: [未対応, 対応中, 確認待ち, 保留, 完了, 破棄]
      - from: 保留
        to: [未対応, 対応中, 確認待ち, 破棄]
      - from: 完了
        to: [未対応, 対応中, 確認待ち, 経過観察, 保留, 破棄]
      - from: 破棄
        to: [未対応, 対応中, 確認待ち, 経過観察, 保留, 完了]
  ### 種別：不具合, 運用保守
  - roles: [管理者]
    trackers: [不具合, 運用保守]
    transitions:
      - from: 未対応
        to: [対応中, 対応済み, 確認待ち, 経過観察, 保留]
      - from: 対応中
        to: [未対応, 対応済み, 確認待ち, 保留]
      - from: 対応済み
        to: [対応中, 確認待ち]
      - from: 確認待ち
        to: [未対応, 対応中, フィードバック, 保留, 完了, 破棄]
      - from: 経過観察
        to: [未対応, 対応中, 破棄]
      - from: フィードバック
        to: [未対応, 対応中, 確認待ち, 保留, 完了, 破棄]
      - from: 保留
        to: [未対応, 対応中, 確認待ち, 破棄]
      - from: 完了
        to: [未対応, 対応中, 確認待ち, 経過観察, 破棄]
      - from: 破棄
        to: [未対応, 対応中, 確認待ち, 経過観察, 完了]
  ### 種別：問い合わせ, その他
  - roles: [管理者]
    trackers: [問い合わせ, その他]
    transitions:
      - from: 未対応
        to: [対応中, 対応済み, 確認待ち, 破棄]
      - from: 対応中
        to: [未対応, 対応済み, 確認待ち]
      - from: 対応済み
        to: [対応中, 確認待ち, 完了]
      - from: 確認待ち
        to: [未対応, 対応中, 対応済み, フィードバック, 保留, 完了, 破棄]
      - from: フィードバック
        to: [未対応, 対応中, 確認待ち, 保留, 完了, 破棄]
      - from: 保留
        to: [未対応, 対応中, 確認待ち, 破棄]
      - from: 完了
        to: [未対応, 対応中, 確認待ち, 破棄]
      - from: 破棄
        to: [未対応, 対応中, 確認待ち, 完了]
  ## ----------
  ## 開発者
  ## ----------
  ### 種別：要望
  - roles: [開発者]
    trackers: [要望]
    transitions:
      - from: 未対応
        to: [確認待ち, 保留, 破棄]
      - from: 確認待ち
        to: [フィードバック, 保留, 破棄]
      - from: フィードバック
        to: [未対応, 確認待ち, 保留, 破棄]
      - from: 保留
        to: [未対応, 確認待ち, 破棄]
  ### 種別：タスク
  - roles: [開発者]
    trackers: [タスク]
    transitions:
      - from: 未対応
        to: [対応中, 対応済み, 確認待ち, 破棄]
      - from: 対応中
        to: [未対応, 対応済み, 確認待ち]
      - from: 対応済み
        to: [対応中, 確認待ち, 完了]
      - from: 確認待ち
        to: [未対応, 対応中, フィードバック, 経過観察, 完了, 破棄]
      - from: 経過観察
        to: [対応中, 完了]
      - from: フィードバック
        to: [未対応, 対応中, 確認待ち, 完了, 破棄]
  ### 種別：不具合, 運用保守
  - roles: [開発者]
    trackers: [不具合, 運用保守]
    transitions:
      - from: 未対応
        to: [対応中, 対応済み, 確認待ち, 経過観察]
      - from: 対応中
        to: [未対応, 対応済み, 確認待ち]
      - from: 対応済み
        to: [対応中, 確認待ち]
      - from: 確認待ち
        to: [未対応, 対応中, フィードバック, 完了, 破棄]
      - from: 経過観察
        to: [未対応, 対応中, 破棄]
      - from: フィードバック
        to: [未対応, 対応中, 確認待ち, 完了, 破棄]
  ### 種別：問い合わせ, その他
  - roles: [開発者]
    trackers: [問い合わせ, その他]
    transitions:
      - from: 未対応
        to: [対応中, 対応済み, 確認待ち, 破棄]
      - from: 対応中
        to: [未対応, 対応済み, 確認待ち]
      - from: 対応済み
        to: [対応中, 確認待ち, 完了]
      - from: 確認待ち
        to: [未対応, 対応中, 対応済み, フィードバック, 完了, 破棄]
      - from: フィードバック
        to: [未対応, 対応中, 確認待ち, 完了, 破棄]
  ## ----------
  ## 報告者
  ## ----------
  ### 種別：要望
  - roles: [報告者]
    trackers: [要望]
    transitions:
      - from: 未対応
        to: [確認待ち, 保留, 破棄]
      - from: 確認待ち
        to: [フィードバック, 保留, 破棄]
      - from: フィードバック
        to: [未対応, 確認待ち, 保留, 破棄]
      - from: 保留
        to: [未対応, 確認待ち, 破棄]
  ### 種別：タスク, 問い合わせ, その他
  - roles: [報告者]
    trackers: [タスク, 問い合わせ, その他]
    transitions:
      - from: 未対応
        to: [確認待ち, 破棄]
      - from: 確認待ち
        to: [フィードバック, 完了, 破棄]
      - from: フィードバック
        to: [確認待ち, 完了, 破棄]
  ### 種別：不具合, 運用保守
  - roles: [報告者]
    trackers: [不具合, 運用保守]
    transitions:
      - from: 未対応
        to: [確認待ち, 破棄]
      - from: 確認待ち
        to: [フィードバック, 完了, 破棄]
      - from: フィードバック
        to: [確認待ち, 完了, 破棄]
      - from: 経過観察
        to: [破棄]

## --------------------
## フィールドの権限
## --------------------
# redmine_reimport_field_permission: true
redmine_field_permissions:
  - roles: [管理者, 開発者, 報告者]
    trackers: [タスク, 不具合, 運用保守, その他]
    permissions:
      # 以下のステータスの場合は「担当者」を必須化
      - statuses: [対応中, 対応済み, 確認待ち, フィードバック, 完了]
        fields: assigned_to
        permission: required
      # ステータスが「破棄」以外の場合は、カスタムフィールド「破棄理由」を非表示にする
      - statuses: [未対応, 対応中, 対応済み, 確認待ち, フィードバック, 完了]
        fields: 理由
        permission: readonly
      # ステータスが「破棄」の場合、カスタムフィールド「理由」を必須化
      - statuses: [破棄, 破棄]
        fields: 理由
        permission: required

## --------------------
## ユーザー
## --------------------
# redmine_reimport_user: true
redmine_users:
  call_api_from_github:
    firstname: 連携
    lastname: Github
    mail: call_api_from_github@example.com
    password: call_api_from_github_password_not_found
    mail_notification: none
    admin: true
    auto_watch_on: false
    hide_mail: true
    locked: true
    custom_fields:
      - name: 自己紹介
        value: |
          GithubからRedmineのAPIを利用する場合はこのアカウントを利用してください。
          ※このアカウントを利用する場合はロックを解除してください。
  authority_check_admin:
    firstname: 管理者
    lastname: 権限チェック
    mail: check@example.com
    hide_mail: true
    password: authority_check_admin_password
    mail_notification: none
    admin: false
    custom_fields:
      - name: 自己紹介
        value: このユーザーは権限チェック完了後にロックしてください
  authority_check_developer:
    firstname: 開発者
    lastname: 権限チェック
    mail: check@example.net
    hide_mail: true
    password: authority_check_developer_password
    mail_notification: none
    admin: false
    auto_watch_on: false
    custom_fields:
      - name: 自己紹介
        value: このユーザーは権限チェック完了後にロックしてください
  authority_check_repoter:
    firstname: 報告者
    lastname: 権限チェック
    mail: check@example.org
    hide_mail: true
    password: authority_check_repoter_password
    mail_notification: none
    admin: false
    auto_watch_on: false
    custom_fields:
      - name: 自己紹介
        value: このユーザーは権限チェック完了後にロックしてください
  authority_check_guest:
    firstname: ゲスト
    lastname: 権限チェック
    mail: check@example.info
    hide_mail: true
    password: authority_check_guest_password
    mail_notification: none
    admin: false
    auto_watch_on: false
    custom_fields:
      - name: 自己紹介
        value: このユーザーは権限チェック完了後にロックしてください
  client_contact_person:
    firstname: 担当者
    lastname: クライアント
    mail: client_contact_person@example.info
    password: client_contact_person_password
    ### メール通知
    mail_notification: none
    ### システム管理者
    admin: false
    ## 優先度が 高い 以上のチケットについても通知
    notify_about_high_priority_issues: false
    ## 自分自身による変更の通知は不要
    no_self_notified: true
    ### オートウォッチ
    auto_watch_on:
      ### 自分が作成したチケット
      - issue_created
      ### 自分が更新したチケット
      - issue_contributed_to
    ## メールアドレスを隠す
    hide_mail: false
    ## カスタムフィールド
    custom_fields:
      - name: 自己紹介
        value: |
          クライアントの担当者を表すユーザーです。
          ※このアカウントを利用しない場合はロックしてください。

## --------------------
## グループ
## --------------------
# redmine_reimport_group: true
redmine_groups:
  - name: API用
    users:
      - call_api_from_github
  - name: 権限チェック用
    users:
      - authority_check_admin
      - authority_check_developer
      - authority_check_repoter
      - authority_check_guest

## --------------------
## チケットのカスタムクエリ
## --------------------
# redmine_reimport_issue_query: true
redmine_issue_queries:
  - name: 担当しているチケット
    filters:
      project.status:
        operator: "="
        values: 1
      assigned_to:
        operator: "="
        values: me
      tracker:
        operator: "="
        values:
          - タスク
          - 不具合
          - 運用保守
          - 問い合わせ
          - その他
      status:
        operator: o
    sort:
      # 優先度 / 降順
      - field: priority
        order: desc
      # 期日 / 昇順
      - field: due_date
        order: asc
      # 親チケット / 昇順
      - field: parent
        order: asc
  - name: 作業担当チケット
    filters:
      project.status:
        operator: "="
        values: 1
      assigned_to:
        operator: "="
        values: me
      tracker:
        operator: "="
        values:
          - タスク
          - 不具合
          - 運用保守
          - 問い合わせ
          - その他
      status:
        operator: "="
        values:
          - 未対応
          - 対応中
          - 対応済み
          - 経過観察
    sort:
      # 優先度 / 降順
      - field: priority
        order: desc
      # 期日 / 昇順
      - field: due_date
        order: asc
      # 親チケット / 昇順
      - field: parent
        order: asc
  - name: 確認待ちチケット
    filters:
      project.status:
        operator: "="
        values: 1
      status:
        operator: "="
        values: 確認待ち
      assigned_to:
        operator: "="
        values: me
    columns:
      # プロジェクト
      - project
      # トラッカー
      - tracker
      # 題名
      - subject
      # 優先度
      - priority
      # 期日
      - due_date
    ## 並び順
    sort:
      # 期日 / 昇順
      - field: due_date
        order: asc
      # 優先度 / 降順
      - field: priority
        order: desc
      # チケットNo / 昇順
      - field: id
        order: asc
  - name: フィードバックチケット
    filters:
      project.status:
        operator: "="
        values: 1
      status:
        operator: "="
        values: フィードバック
      assigned_to:
        operator: "="
        values: me
    columns:
      # プロジェクト
      - project
      # トラッカー
      - tracker
      # 題名
      - subject
      # 優先度
      - priority
      # 期日
      - due_date
    sort:
      # 期日 / 昇順
      - field: due_date
        order: asc
      # 優先度 / 降順
      - field: priority
        order: desc
      # チケットNo / 昇順
      - field: id
        order: asc
  - name: 経過観察チケット
    filters:
      project.status:
        operator: "="
        values: 1
      status:
        operator: "="
        values: 経過観察
      assigned_to:
        operator: "="
        values: me
    columns:
      # プロジェクト
      - project
      # トラッカー
      - tracker
      # 題名
      - subject
      # 優先度
      - priority
      # 期日
      - due_date
    ## 並び順
    sort:
      # 期日 / 昇順
      - field: due_date
        order: asc
      # 優先度 / 降順
      - field: priority
        order: desc
      # チケットNo / 昇順
      - field: id
        order: asc
  - name: 先月度実績
    filters:
      # ステータス / 終了
      status:
        operator: c
        values:
          - ""
      # 終了日 / 先月
      closed_on:
        operator: lm
        values:
          - ""
    columns:
      # トラッカー
      - tracker
      # 優先度
      - priority
      # 題名
      - subject
      # 担当者
      - assigned_to
      # 予定時間
      - estimated_hours
      # 作業時間
      - spent_hours
      # 期日
      - due_date
      # 終了日
      - closed_on
    group_by: project
    sort:
      # プロジェクト / 昇順
      - field: project
        order: asc
      # 期日 / 昇順
      - field: due_date
        order: asc
      # 終了日 / 昇順
      - field: closed_on
        order: asc
    total:
      # 予定時間
      - estimated_hours
      # 作業時間
      - spent_hours
  - name: 今月度実績
    filters:
      # ステータス / 終了
      status:
        operator: c
        values:
          - ""
      # 終了日 / 今月
      closed_on:
        operator: m
        values:
          - ""
    columns:
      # トラッカー
      - tracker
      # 優先度
      - priority
      # 題名
      - subject
      # 担当者
      - assigned_to
      # 予定時間
      - estimated_hours
      # 作業時間
      - spent_hours
      # 期日
      - due_date
      # 終了日
      - closed_on
    group_by: project
    sort:
      # プロジェクト / 昇順
      - field: project
        order: asc
      # 期日 / 昇順
      - field: due_date
        order: asc
      # 終了日 / 昇順
      - field: closed_on
        order: asc
    total:
      - estimated_hours
      - spent_hours

## --------------------
## プロジェクトのカスタムクエリ
## --------------------
# redmine_reimport_project_query: true
redmine_project_queries:
  - name: 参加中
    id: 5
    ## 説明
    description: 参加中のプロジェクトのみ表示します
    ## フィルタ
    filters:
      status:
        operator: "="
        values:
          - 1
      id:
        operator: "="
        values:
          - mine
    ## 表示: 自分のみ:false / すべてのユーザー:true
    visibility: true
    ## 表示形式: ボード:board / リスト:list
    display_type: board
  - name: ブックマーク済み
    id: 6
    description: ブックマーク済みのプロジェクトのみ表示します
    filters:
      status:
        operator: "="
        values:
          - 1
      id:
        operator: "="
        values:
          - bookmarks
    visibility: true
    display_type: board

## --------------------
## 時間管理のカスタムクエリ(未実装)
## --------------------
# redmine_reimport_time_entry_query: true
redmine_time_entry_queries: []

## --------------------
## Wikiページのデータ
## --------------------
## ホーム
redmine_wiki_content_home: "{{ lookup('file', 'files/wiki/home.md') }}"
## サイドバー
redmine_wiki_content_sidebar: "{{ lookup('file', 'files/wiki/sidebar.md') }}"
## システム概要
redmine_wiki_content_overview: "{{ lookup('file', 'files/wiki/overview.md') }}"
redmine_wiki_content_overview_architecture: "{{ lookup('file', 'files/wiki/overview/architecture.md') }}"
redmine_wiki_content_overview_data_structure: "{{ lookup('file', 'files/wiki/overview/data_structure.md') }}"
redmine_wiki_content_overview_technology: "{{ lookup('file', 'files/wiki/overview/technology.md') }}"
redmine_wiki_content_overview_feature: "{{ lookup('file', 'files/wiki/overview/feature.md') }}"
## 環境情報
redmine_wiki_content_environment: "{{ lookup('file', 'files/wiki/environment.md') }}"
redmine_wiki_content_environment_development: "{{ lookup('file', 'files/wiki/environment/development.md') }}"
redmine_wiki_content_environment_staging: "{{ lookup('file', 'files/wiki/environment/staging.md') }}"
redmine_wiki_content_environment_production: "{{ lookup('file', 'files/wiki/environment/production.md') }}"
## 開発情報
redmine_wiki_content_development: "{{ lookup('file', 'files/wiki/development.md') }}"
redmine_wiki_content_development_deploy: "{{ lookup('file', 'files/wiki/development/deploy.md') }}"
redmine_wiki_content_development_local_dev_env: "{{ lookup('file', 'files/wiki/development/local_dev_env.md') }}"
redmine_wiki_content_development_repository: "{{ lookup('file', 'files/wiki/development/repository.md') }}"
## インフラ情報
redmine_wiki_content_infra: "{{ lookup('file', 'files/wiki/infra.md') }}"
redmine_wiki_content_infra_cloud: "{{ lookup('file', 'files/wiki/infra/cloud.md') }}"
redmine_wiki_content_infra_dns: "{{ lookup('file', 'files/wiki/infra/dns.md') }}"
redmine_wiki_content_infra_server: "{{ lookup('file', 'files/wiki/infra/server.md') }}"
## インフラ情報 - サーバー情報
redmine_wiki_content_infra_server_package: "{{ lookup('file', 'files/wiki/infra/server/package.md') }}"
redmine_wiki_content_infra_server_disk: "{{ lookup('file', 'files/wiki/infra/server/disk.md') }}"
redmine_wiki_content_infra_server_file: "{{ lookup('file', 'files/wiki/infra/server/file.md') }}"
redmine_wiki_content_infra_server_port: "{{ lookup('file', 'files/wiki/infra/server/port.md') }}"
redmine_wiki_content_infra_server_traffic: "{{ lookup('file', 'files/wiki/infra/server/traffic.md') }}"
redmine_wiki_content_infra_server_other: "{{ lookup('file', 'files/wiki/infra/server/other.md') }}"
## ヘルプ
redmine_wiki_content_help: "{{ lookup('file', 'files/wiki/help.md') }}"
redmine_wiki_content_help_format: "{{ lookup('file', 'files/wiki/help/format.md') }}"
redmine_wiki_content_help_operation: "{{ lookup('file', 'files/wiki/help/operation.md') }}"
redmine_wiki_content_help_macro_list: "{{ lookup('file', 'files/wiki/help/macro_list.md') }}"
### ヘルプ - ワークフロー
redmine_wiki_content_help_workflow: "{{ lookup('file', 'files/wiki/help/workflow.md') }}"
redmine_wiki_content_help_workflow_request: "{{ lookup('file', 'files/wiki/help/workflow/request.md') }}"
redmine_wiki_content_help_workflow_task: "{{ lookup('file', 'files/wiki/help/workflow/task.md') }}"
redmine_wiki_content_help_workflow_bug: "{{ lookup('file', 'files/wiki/help/workflow/bug.md') }}"
redmine_wiki_content_help_workflow_inquiry: "{{ lookup('file', 'files/wiki/help/workflow/inquiry.md') }}"

redmine_wiki_page_sidebar: "{{ redmine_wiki_content_sidebar }}"
redmine_wiki_page_help:
  content: "{{ redmine_wiki_content_help }}"
  childlen:
    Redmine記法: "{{ redmine_wiki_content_help_format }}"
    運用方法: "{{ redmine_wiki_content_help_operation }}"
    ワークフロー:
      content: "{{ redmine_wiki_content_help_workflow }}"
      childlen:
        要望: "{{ redmine_wiki_content_help_workflow_request }}"
        タスク: "{{ redmine_wiki_content_help_workflow_task }}"
        不具合: "{{ redmine_wiki_content_help_workflow_bug }}"
        問い合わせ: "{{ redmine_wiki_content_help_workflow_inquiry }}"
    マクロ一覧: "{{ redmine_wiki_content_help_macro_list }}"
redmine_wiki_page_orverview:
  content: "{{ redmine_wiki_content_overview }}"
  childlen:
    システム構成: "{{ redmine_wiki_content_overview_architecture }}"
    データ構造: "{{ redmine_wiki_content_overview_data_structure }}"
    技術スタック: "{{ redmine_wiki_content_overview_technology }}"
    機能一覧: "{{ redmine_wiki_content_overview_feature }}"
redmine_wiki_page_environment:
  content: "{{ redmine_wiki_content_environment }}"
  childlen:
    開発環境: "{{ redmine_wiki_content_environment_development }}"
    ステージング環境: "{{ redmine_wiki_content_environment_staging }}"
    本番環境: "{{ redmine_wiki_content_environment_production }}"
redmine_wiki_page_development:
  content: "{{ redmine_wiki_content_development }}"
  childlen:
    デプロイ方法: "{{ redmine_wiki_content_development_deploy }}"
    ローカル開発環境: "{{ redmine_wiki_content_development_local_dev_env }}"
    リポジトリ情報: "{{ redmine_wiki_content_development_repository }}"
redmine_wiki_page_infra:
  content: "{{ redmine_wiki_content_infra }}"
  childlen:
    クラウド情報: "{{ redmine_wiki_content_infra_cloud }}"
    DNS情報: "{{ redmine_wiki_content_infra_dns }}"
    サーバー情報:
      content: "{{ redmine_wiki_content_infra_server }}"
      childlen:
        パッケージ情報: "{{ redmine_wiki_content_infra_server_package }}"
        ディスク使用量: "{{ redmine_wiki_content_infra_server_disk }}"
        ファイル: "{{ redmine_wiki_content_infra_server_file }}"
        待受ポート: "{{ redmine_wiki_content_infra_server_port }}"
        トラフィック: "{{ redmine_wiki_content_infra_server_traffic }}"
        その他: "{{ redmine_wiki_content_infra_server_other }}"

## --------------------
## プロジェクト
## --------------------
# redmine_reimport_project: true
redmine_projects:
  ## 「識別子」は100文字までです。アルファベット小文字(a-z)・数字・ハイフン・アンダースコアが使えます。
  client:
    name: クライアント
    description: クライアント用のテンプレートプロジェクトです
    ## ホームページ
    homepage: https://example.com/
    ## 公開
    is_public: false
    ## モジュール
    modules:
      ## チケットトラッキング
      - issue_tracking
      ## 時間管理
      - time_tracking
      ## ニュース
      - news
      ## Wiki
      - wiki
      ## カレンダー
      - calendar
      ## チケットテンプレート
      - issue_templates
      ## DMSF
      - dmsf
    ## メンバーを継承
    # inherit_members: true
    ## メンバー
    members:
      - login: authority_check_admin
        role: 管理者
      - login: authority_check_developer
        role: 開発者
      - login: admin
        role: [管理者, 開発者]
      - login: authority_check_repoter
        role: 報告者
    ## トラッカー
    trackes:
      - 要望
      - タスク
      - 不具合
      - 運用保守
      - 問い合わせ
      - その他
    wiki_main_page: Wiki
    wiki_pages:
      Wiki:
        content: "{{ lookup('file', 'files/wiki/home/client.md') }}"
        childlen:
          ヘルプ: "{{ redmine_wiki_page_help }}"
      Sidebar: "{{ redmine_wiki_page_sidebar }}"
    issue_queries: []
    time_entry_queries: []
    childlen:
      web:
        name: Web制作
        description: Web制作用のテンプレートプロジェクトです
        is_public: false
        inherit_members: true
        homepage: https://example.com/
        custom_fields:
          - name: 管理画面URL
            value: https://example.com/wp-login.php
        wiki_main_page: Wiki
        wiki_pages:
          Wiki:
            content: "{{ lookup('file', 'files/wiki/home/web.md') }}"
            childlen:
              ヘルプ: "{{ redmine_wiki_page_help }}"
          Sidebar: "{{ redmine_wiki_page_sidebar }}"
      develop:
        name: システム開発
        description: システム開発用のテンプレートプロジェクトです
        inherit_members: true
        homepage: https://app.example.com/
        custom_fields:
          - name: 管理画面URL
            value: https://admin.example.com/
        wiki_pages:
          Wiki:
            content: "{{ lookup('file', 'files/wiki/home/develop.md') }}"
            childlen:
              システム概要: "{{ redmine_wiki_page_orverview }}"
              インフラ情報: "{{ redmine_wiki_page_infra }}"
              環境情報: "{{ redmine_wiki_page_environment }}"
              開発情報: "{{ redmine_wiki_page_development }}"
              ヘルプ: "{{ redmine_wiki_page_help }}"
          Sidebar: "{{ redmine_wiki_page_sidebar }}"
      infra:
        name: インフラ管理
        description: インフラ管理用のテンプレートプロジェクトです
        inherit_members: true
        wiki_pages:
          Wiki:
            content: "{{ lookup('file', 'files/wiki/home/infra.md') }}"
            childlen:
              ヘルプ: "{{ redmine_wiki_page_help }}"
          Sidebar: "{{ redmine_wiki_page_sidebar }}"
      support:
        name: カスタマーサポート
        description: 問い合わせ管理用のテンプレートプロジェクトです
        inherit_members: true
        wiki_pages:
          Wiki:
            content: "{{ lookup('file', 'files/wiki/home/support.md') }}"
            childlen:
              ヘルプ: "{{ redmine_wiki_page_help }}"
          Sidebar: "{{ redmine_wiki_page_sidebar }}"

## --------------------
## 添付ファイル
## --------------------
# redmine_reimport_attachment: true
# redmine_attachments:
#   - project: client
#     file: files/attachment/dummy_project.txt
#     description: ダミーファイル
#   - project: client
#     wiki: Wiki
#     file: files/attachment/dummy_wiki.txt
#     filename: dummy.txt

## --------------------
## message customizeプラグイン
## --------------------
# 置換内容
# ------------------
# トラッカー => 分類
# 文書 => ドキュメント
# ニュース => お知らせ
# カスタムクエリ => 検索条件
# 新しいクエリ => 新しい検索条件
# アノテート => 注釈
# ------------------
# redmine_reimport_message_customize: true
redmine_message_customize:
  error_scm_annotate: "エントリが存在しない、もしくは注釈できません。"
  error_no_tracker_in_project: 'このプロジェクトには分類が登録されていません。プロジェクト設定を確認してください。'
  error_workflow_copy_source: 'コピー元となる分類またはロールを選択してください'
  error_workflow_copy_target: 'コピー先となる分類とロールを選択してください'
  error_can_not_delete_tracker: 'この分類は使用中です。削除できません。'
  field_tracker: 分類
  setting_default_projects_tracker_ids: 新規プロジェクトにおいてデフォルトで有効になる分類
  permission_view_news: お知らせの閲覧
  permission_manage_news: お知らせの管理
  permission_comment_news: お知らせへのコメント
  permission_view_documents: ドキュメントの閲覧
  project_module_news: お知らせ
  project_module_documents: ドキュメント
  label_document: ドキュメント
  label_document_new: 新しいドキュメント
  label_document_plural: ドキュメント
  label_document_added: ドキュメントの追加
  label_tracker: 分類
  label_tracker_plural: 分類
  label_tracker_new: 新しい分類
  label_news: お知らせ
  label_news_new: お知らせを追加
  label_news_plural: お知らせ
  label_news_latest: 最新お知らせ
  label_news_view_all: すべてのお知らせを表示
  label_news_added: お知らせの追加
  label_news_comment_added: お知らせへのコメント追加
  label_query: 検索条件
  label_query_plural: 検索条件
  label_query_new: 新しい検索条件
  label_my_queries: マイ検索条件
  label_display_used_statuses_only: この分類で使用中のステータスのみ表示
  button_annotate: 注釈
  text_workflow_edit: ワークフローを編集するロールと分類を選んでください
  text_tracker_no_workflow: この分類にワークフローが定義されていません
  text_no_configuration_data: "ロール、分類、チケットのステータス、ワークフローがまだ設定されていません。\nデフォルト設定のロードを強くお勧めします。ロードした後、それを修正することができます。"
  default_doc_category_user: ユーザードキュメント
  default_doc_category_tech: 技術ドキュメント
  enumeration_doc_categories: ドキュメントカテゴリー
  description_issue_category_reassign: 新しいカテゴリーを選択してください
  error_scm_annotate_big_text_file: テキストファイルサイズの上限を超えているため注釈できません。
  permission_add_documents: ドキュメントの追加
  permission_edit_documents: ドキュメントの編集
  permission_delete_documents: ドキュメントの削除
  error_no_tracker_allowed_for_new_issue_in_project: このプロジェクトにはチケットの追加が許可されている分類がありません
  label_tracker_all: すべての分類
  text_status_no_workflow: このステータスはどの分類のワークフローでも使われていません
  label_trackers_description: 分類の説明
  label_open_trackers_description: すべての分類の説明を表示
  text_select_apply_tracker: この分類を適用
  label_view_previous_annotation: この更新以前の注釈
  ## ----------
  ## DMSF
  ## ----------
  dmsf: ファイル管理   ## Custom fields tab title
  menu_dmsf: ファイル管理
  label_dmsf_file_plural: ファイル管理のファイル ## Email subject & Search options
  label_dmsf_updated: ファイル管理 更新
  label_dmsf_downloaded: ファイル管理 ダウンロード
  project_module_dmsf: ファイル管理
  permission_email_documents: ファイルをメールで送信
  link_user_preferences: ファイル管理の設定
  heading_send_documents_by_email: メールでファイルを送信する
  label_email_documents: ファイル
  link_documents: ファイル管理
  dmsf_and: 及び
  dmsf_or: または
  label_empty_trash_bin: ゴミ箱を空にする
  label_dmsf_columns: ファイルの表示項目
  field_modified: 更新日
  field_updated: 更新日
  field_count: ダウンロード数
  field_first_at: 最初へ
  field_last_at: 最後へ
  field_locked: ロックする
  label_column_modified: 更新日時
  label_dmsf_permissions: アクセス制限
  option_version_patch: パッチ
  ## ----------
  ## HedgeDoc
  ## ----------
  permission_show_hedgedoc_pads: HedgeDocノートの表示
  permission_import_hedgedoc_pads: HedgeDocノートのインポート
  # project_module_hedgedoc: HedgeDoc
  # label_hedgedoc_url: HedgeDoc URL
  label_show_hedgedoc_in_menu: メニューにHedgeDocを表示
  label_new_hedgedoc_pad: 新しいHedgeDocノート
  label_hedgedoc_pad_plural: HedgeDocノート
  label_switch_to_hedgedoc: HedgeDocに切り替え
  label_hedgedoc_list_info_html: '<strong>重要:</strong> All your own PADs and all non-private PADs are listed here if they use a Redmine project identifier as prefix in the PAD title (e.g. "testprojekt: My PAD"). If you have access in Redmine to the projects with this project identifier, these PADs will be displayed to <em>all</em> project members.<br />Inform your HedgeDoc users that PADs with a correct project prefix are automatically listed in Redmine if the author is also a Redmine user.'
  label_hedgedoc_project_list_info_html: '<strong>重要:</strong> Lists all PADs with the prefix "%{prefix}" that are not marked as private or they are your own (例: "%{prefix}: My PAD").<br />Inform your HedgeDoc users that PADs with this project prefix will automatically be listed in Redmine if the author is also a Redmine user.'
  field_hedgedoc_permission: 権限
  label_hedgedoc_pads: ノート
  ## ----------
  ## Toggl
  ## ----------
  label_no_results_found: 結果は見つかりませんでした
  permission_edit_all_toggl_entries: すべてのTogglエントリーの編集
  permission_toggl_log_time_to_all_issues: すべてのチケットのTogglエントリーの作成
  permission_view_toggl_entries: Togglエントリーの表示
  # redmine_toggl: Redmine Toggl
  # toggl_entries_title: Toggl
  toggl:
    all_entries: すべてのエントリー
    are_you_sure_you_want_to_delete_toggl_entry: "TogglとRedmineの両方のエントリーを削除していいですか?"
    description: 説明
    duration: 期間
    first: 最初へ
    invalid_duration: 無効な期間
    last: 最後へ
    my_entries: マイエントリー
    new_toggl_entry: 新しいTogglエントリー
    settings:
      header: Redmine Togglの設定
      info: Togglエントリーのタグをどの作業分類にマッピングするかを設定します、複数のTogglエントリーのタグをカンマ区切りで指定できます。
    start: スタート
    stop: ストップ
    time_entry: 作業時間
    toggl_could_not_fetch: Togglエントリーを取得できませんでした、 APIトークンが正しいことを確認してください。
    toggl_entries: Togglエントリー
    toggl_entry: Togglエントリー
    toggl_entry_created: Togglエントリーを作成しました
    toggl_entry_deleted: Togglエントリーを削除しました
    toggl_entry_updated: Togglエントリーを更新しました
    toggl_invalid_user_toggl_entry_info: 無効なTogglエントリーを検出しました、チケット番号が正しいことを確認してください。
    toggl_invalid_user_toggl_entry_subject: 無効なTogglエントリーがあります
    toggl_project: プロジェクト
    toggl_report_no_match_found: 該当なし
    toggl_report_without_issue_subject: Redmine Toggl Entries Without Issue
    toggl_report_without_project_subject: Redmine Toggl Entries Without Toggl Project
    toggl_tags: タグ
    toggl_task: タスク
    toggl_workspace: ワークスペース
    # user_is_not_authorized_for_issue: "User %{user} is not authorized for issue %{issue}"
  ## ----------
  ## OAuth
  ## ----------
  oauth_login_via: "<b>%{oauth}</b>でログイン"
  oauth_login_with: OAuthによるログイン
  # oauth_no_verified_email: No verified email provided, check your settings on OAuth provider site.
  oauth_invalid_provider: 無効なOAuthプロバイダー
  oauth_none: 無し
  oauth_provider: OAuthプロバイダー
  oauth_provider_info: OAuthプロバイダー
  oauth_site: 認証URL
  oauth_site_info: OAuthプロバイダーの認証URL
  oauth_client_id: クライアントID
  oauth_client_id_info: クライアントIDを設定します
  oauth_client_secret: クライアントシークレット
  oauth_client_secret_info: クライアントシークレットを設定します
  oauth_tenant_id: テナントID / Realm
  oauth_tenant_id_info: "ディレクトリー(テナント)IDを設定します"
  oauth_button_info: "OAuthログインボタンの色とアイコンを設定します(未指定の場合ボタンは表示されません)"
  oauth_login_button: ログインボタン
  oauth_custom_name: プロバイダー名
  oauth_custom_name_info: OAuthログインボタンに表示するプロバイダー名
  oauth_custom_auth_endpoint: 認証エンドポイント
  oauth_custom_auth_endpoint_info: 認証エンドポイントのURLを設定します
  oauth_custom_token_endpoint: トークンエンドポイント
  oauth_custom_token_endpoint_info: トークンエンドポイントのURLを設定します
  oauth_custom_profile_endpoint: プロフィールエンドポイント
  oauth_custom_profile_endpoint_info: プロフィールエンドポイントのURLを設定します
  oauth_custom_scope: OAuthスコープ
  oauth_custom_scope_info: "OAuthスコープ (デフォルト: 'openid profile email')"
  oauth_custom_uid_field: UIDフィールド
  oauth_custom_uid_field_info: "UIDフィールド (デフォルト: preferred_username)"
  oauth_custom_email_field: Emailフィールド
  oauth_custom_email_field_info: "Emailフィールド (デフォルト: email)"
  oauth_hide_login_form: ログインフォームを隠す
  oauth_custom_firstname_field: "プロバイダーの名前(名)フィールド"
  oauth_custom_lastname_field: "プロバイダーの名前(性)フィールド"
  oauth_update_login: ログイン情報の更新
  oauth_update_login_info: ログイン成功後、ユーザーのログイン情報を更新します
  oauth_logout: OAuthログアウト
  oauth_logout_info: Redmineログアウト後にOAuthプロバイダからもログアウトする
  oauth_login: OAuthログイン
  oauth_login_info: ログインフォームをスキップしてOAuthプロバイダ経由でユーザーが自動的にログインできるようにする
  oauth_custom_logout_endpoint: ログアウトエンドポイント
  oauth_custom_logout_endpoint_info: ログアウトエンドポイントのURLを設定します
  oauth_validate_user_roles: ユーザーロールの検証
  # oauth_validate_user_roles_info: "A key, where user roles are present in the token. If set, 'user' role grants access,
  #   'admin' grants admin rights. If 'user' role is not present, access is denied. If 'admin role is missing, admin
  #   rights are revoked. E.g.: Enter 'resource_access.redmine.roles', if you have your token set as follows:
  #   'resource_access': { 'redmine': { 'roles': ['user', 'admin'] } }"
  # oauth_autologin: "Autologin with %{oauth}"


## --------------------
## view customizeプラグイン
## --------------------
# redmine_reimport_view_customize: true
redmine_view_customize:
  - name: リセット用CSS
    code: <link rel="stylesheet" href="https://matcha.mizu.sh/matcha.css">
    path_pattern: ".*"
    insertion_position: html_head
    customize_type: html
    is_enabled: false

## --------------------
## グローバルチケットテンプレート
## --------------------
# redmine_reimport_issue_template: true
redmine_issue_templates:
  - tracker: 不具合
    name: デフォルト
    description: "{{ lookup('file', 'files/template/issue/bug.md') }}"
    is_default: true
    enabled: true
    position: 1
  - tracker: 問い合わせ
    name: 仕様確認
    issue_title: 〇〇機能の仕様について確認です
    description: "{{ lookup('file', 'files/template/issue/inquiry.md') }}"
    is_default: false
    enabled: true
    position: 2

## --------------------
## グローバルノートテンプレート
## --------------------
# redmine_reimport_note_template: true
redmine_note_templates:
  - tracker: タスク
    name: レビュー結果
    description: "{{ lookup('file', 'files/template/note/review.md') }}"
    enabled: true

## 以下、Redmine以外の設定
## =================================
## --------------------------
## インストールするツール
## --------------------------
install_tools:
  ## https://github.com/eza-community/eza
  - eza
  ## https://github.com/sharkdp/fd
  - fd
  ## https://github.com/sharkdp/bat
  - bat
  ## https://jonas.github.io/tig/
  - tig
  ## https://github.com/dandavison/delta
  - delta
  ## https://goaccess.io/
  - goaccess
  ## https://github.com/google/osv-scanner
  - osv-scanner
  # https://direnv.net/
  - direnv
  ## https://taskfile.dev/
  - task
  ## https://restic.net/
  - restic
  ## https://rclone.org/
  - rclone
  ## https://github.com/kellyjonbrazil/jc
  - jc
  ## https://httpie.io/
  - httpie
  ## https://duckdb.org/
  - duckdb
  ## https://github.com/charmbracelet/glow
  - glow
  ## https://github.com/jgm/pandoc
  - pandoc
  ## https://graphviz.org/
  - graphviz
  ## https://plantuml.com/ja/
  - plantuml
  ## https://github.com/terrastruct/d2
  - d2
  ## https://github.com/k1LoW/tbls
  - tbls
  ## https://github.com/k1LoW/runn
  - runn
  ## https://github.com/microsoft/pict
  - pict
  # https://google.github.io/zx/
  - zx
  # https://github.com/alexmyczko/fnt
  - fnt

## ---------
## ログインバナーに表示するロゴのテキスト
## ---------
banner_logo_text: "{{ redmine_hostname }}"

## ---------
## ログインバナーに表示する追加テキスト
## ---------
banner_additional_text: |
  Repository:
  https://github.com/redmine/redmine

  Issue Tracking System:
  https://www.redmine.org/

## --------------------
## Postfixの設定
## --------------------
postfix_cfg:
  myhostname: "{{ redmine_hostname }}"

## --------------------
## logrotateの設定
## --------------------
logrotate_settings:
  nginx:
    paths:
      - /var/log/nginx/*.log
    frequency: daily
    missingok: true
    rotate: 35
    compress: true
    delaycompress: true
    notifempty: true
    create:
      mode: "0640"
      user: www-data
      group: adm
    sharedscripts: true
    prerotate: |
      if [ -d /etc/logrotate.d/httpd-prerotate ]; then \
        run-parts /etc/logrotate.d/httpd-prerotate; \
      fi \
    postrotate: invoke-rc.d nginx rotate >/dev/null 2>&1
  redmine:
    paths:
      - /opt/redmine/log/*.log
    frequency: daily
    missingok: true
    rotate: 14
    compress: true
    delaycompress: true
    notifempty: true
    copytruncate: true

## --------------------
## OpenDKIMにより認証するドメイン
## --------------------
opendkim_domains:
  - "{{ redmine_domain }}"

## --------------------
## 自動バックアップ設定
## --------------------
backup_settings:
  auto_backup:
    user: redmine
    cron:
      hour: "23"
      minute: "55"
      job_suffix: "1>/dev/null"
    command: |
      {% set db_name = redmine_db_cfg[redmine_mode].database -%}
      {% set db_user = redmine_db_cfg[redmine_mode].username -%}
      {% set db_password = redmine_db_cfg[redmine_mode].password -%}
      mariadb-dump -u {{ db_user }} -p{{ db_password }} --single-transaction {{ db_name }} | sed -e '/^\/\*\!50013 DEFINER=/d' >${BACKUP_DATA_DIR}/dump.sql
      cd "{{ redmine_root }}/files"
      tar vcfz ${BACKUP_DATA_DIR}/files.tar.gz ./*
    restic:
      repo_password: auto_backup_password
      forget_keep_type: daily
      forget_keep_value: 3

## --------------
## インストールするNginx関連パッケージ
## --------------
nginx_packages:
  - nginx
  - goaccess
  - libnginx-mod-http-geoip
  - libnginx-mod-http-modsecurity
  - modsecurity-crs

## --------------
## Nginxの全体設定
## --------------
nginx_cfg:
  extra_setting: |
    ## ------
    ## Geo
    ## ------
    geo $local_ip {
      default        0;
      127.0.0.1      2;
      192.168.0.0/16 1;
      172.16.0.0/12  1;
      10.0.0.0/8     1;
      ::1            2;
      2001:0db8::/32 1;
    }
    ## ------
    ## GeoIP
    ## ------
    geoip_country /usr/share/GeoIP/GeoIP.dat;
    map $geoip_country_code $allowed_country {
      default no;
      JP yes;
      US yes;
      # default yes;
      # CN no;
      # RU no;
      # HK no;
      # BR no;
    }

## --------------
## バーチャルホストの設定
## --------------
nginx_vhosts:
  default:
    default_server: true
    server_name: redmine.local
    upstream:
      name: redmine
      content: |
        server unix:///opt/redmine/tmp/redmine.sock;
    client_max_body_size: 0
    # client_max_body_size: 100M
    includes:
      - snippets/letsencrypt_dehydrated.conf
      - snippets/modsecurity.conf
    add_headers:
      X-Geoip-Country-Code: $geoip_country_code
      X-Allowed-Country: $allowed_country
      X-Local-Ip: $local_ip
    locations:
      - pattern: /
        content: |
          set $allowed_ip no;
          if ($local_ip) {
            set $allowed_ip yes;
          }
          if ($allowed_country = yes) {
            set $allowed_ip yes;
          }
          if ($allowed_ip = no) {
            return 403;
          }
          proxy_pass http://redmine;
          include proxy_params;
      - pattern: "/\\.ht"
        match_type: "~"
        content: "deny all;"
  hedgedoc:
    pre_extra_setting: |
      map $http_upgrade $connection_upgrade {
          default upgrade;
          ''      close;
      }
    server_name: hedgedoc.redmine.local
    client_max_body_size: 0
    locations:
      - pattern: /
        content: |
          proxy_pass http://127.0.0.1:3000;
          include proxy_params;
      - pattern: /socket.io/
        content: |
          proxy_pass http://127.0.0.1:3000;
          include snippets/websocket.conf;
          include proxy_params;
      - pattern: "/\\.ht"
        match_type: "~"
        content: "deny all;"
  mailpit:
    pre_extra_setting: |
      map $http_upgrade $connection_upgrade {
          default upgrade;
          ''      close;
      }
    server_name: mailpit.redmine.local
    locations:
      - pattern: /
        content: |
          proxy_pass http://127.0.0.1:8025;
          include snippets/websocket.conf;
          include proxy_params;
  status:
    server_name: localhost
    listen: 8080
    access_log: "off"
    locations:
      - pattern: /nginx_status
        content: |
          stub_status on;

## -------------------
## MariaDBのrootのパスワード
## -------------------
# mariadb_root_password: r00tP@55w0rd

## -------------------
## データベースの設定
## -------------------
mariadb_databases:
  - name: redmine
    encoding: utf8mb4
    collation: utf8mb4_general_ci
    hosts:
      - "127.0.0.1"
      - localhost
    user: redmine_user
    password: redmine_password
  - name: hedgedoc
    encoding: utf8mb4
    collation: utf8mb4_general_ci
    hosts:
      - "127.0.0.1"
      - localhost
    user: hedgedoc_user
    password: hedgedoc_password

## -------------------
## データベースユーザーの設定
## -------------------
mariadb_users:
  - name: mackerel_agent
    password: very_very_5tr0ng_p455w0rd
    hosts:
      - 127.0.0.1
      - ::1
      - localhost
    privs:
      - "*.*:PROCESS,SUPER,REPLICATION CLIENT"

## ---------
## APIキー
## ---------
# mackerel_agent_api_key: ""

## ---------
## Mackerelエージェントの環境変数
## ---------
mackerel_envs:
  MYSQL_PASSWORD: very_very_5tr0ng_p455w0rd

## ---------
## Mackerelエージェントの追加設定(プラグインの設定など)
## ---------
mackerel_agent_extra_setting: |
  ## https://mackerel.io/ja/docs/entry/plugins/mackerel-plugin-linux
  [plugin.metrics.linux]
  command = "/usr/bin/mackerel-plugin-linux"

  [plugin.metrics.mailq]
  command = "/usr/bin/mackerel-plugin-mailq -M postfix"

  ## https://mackerel.io/ja/docs/entry/plugins/mackerel-plugin-nginx
  [plugin.metrics.nginx]
  command = "/usr/bin/mackerel-plugin-nginx"

  ## https://mackerel.io/ja/docs/entry/plugins/mackerel-plugin-mysql
  [plugin.metrics.mysql]
  command = "/usr/bin/ackerel-plugin-mysql --username=mackerel_agent --enable_extended=true"

## -----------------
## dehydratedで管理するドメインの設定
## -----------------
# dehydrated_domains: "{{ {redmine_hostname: None} }}"
# dehydrated_domains:
#   redmine.dev:
#   redmine.page: redmine.page
#   redmine.community:
#     - redmine.community
#     - "*.redmine.community"

## -----------------
## dehydrated実行時のフック設定(initialize)
## -----------------
# dehydrated_hook_initialize: |
#   export PROVIDER_UPDATE_DELAY=${PROVIDER_UPDATE_DELAY:-"30"}
#   export PROVIDER=${PROVIDER:-"cloudflare"}
#   export LEXICON_CLOUDFLARE_USERNAME={{ lookup('env', 'CLOUDFLARE_USERNAME') }}
#   export LEXICON_CLOUDFLARE_TOKEN={{ lookup('env', 'CLOUDFLARE_TOKEN') }}

## -----------------
## dehydrated実行時のフック設定(deploy challenge)
## -----------------
# dehydrated_hook_deploy_challenge: |
#   local DOMAIN="${1}" TOKEN_FILENAME="${2}" TOKEN_VALUE="${3}"
#   echo "deploy_challenge called: ${DOMAIN}, ${TOKEN_FILENAME}, ${TOKEN_VALUE}"
#   lexicon $PROVIDER create ${DOMAIN} TXT --name="_acme-challenge.${DOMAIN}." --content="${TOKEN_VALUE}"
#   local DELAY_COUNTDOWN=$PROVIDER_UPDATE_DELAY
#   while [ $DELAY_COUNTDOWN -gt 0 ]; do
#       echo -ne "${DELAY_COUNTDOWN}\033[0K\r"
#       sleep 1
#       : $((DELAY_COUNTDOWN--))
#   done

## -----------------
## dehydrated実行時のフック設定(clean challenge)
## -----------------
# dehydrated_hook_clean_challenge: |
#   local DOMAIN="${1}" TOKEN_FILENAME="${2}" TOKEN_VALUE="${3}"
#   echo "clean_challenge called: ${DOMAIN}, ${TOKEN_FILENAME}, ${TOKEN_VALUE}"
#   lexicon $PROVIDER delete ${DOMAIN} TXT --name="_acme-challenge.${DOMAIN}." --content="${TOKEN_VALUE}"

## -----------------
## dehydrated実行時のフック設定(deploy cert)
## -----------------
# dehydrated_hook_deploy_cert: |
#   systemctl reload nginx

## -----------------
## dehydrated実行時のフック設定(deploy ocsp)
## -----------------
# dehydrated_hook_deploy_ocsp: |
#   systemctl reload nginx

## ----------
## DNSレコード情報の出力先ディレクトリ
## ----------
dns_recode_output_dir: ../dns_info

## ----------
## DNS情報を取得するドメイン
## ※収集されたDNSのレコード情報は「dns_recodes」変数にホスト名毎のディクショナリとして格納されます
## -----------
dns_domains: "{{ { redmine_hostname: None } }}"

## --------------
## maipitの環境変数の設定
## --------------
mailpit_envs:
  MP_ENABLE_SPAMASSASSIN: "127.0.0.1:783"

## --------------
## HedgeDocの設定
## --------------
hedgedoc_cfg:
  production:
    domain: localhost
    # host: localhost
    port: 3000
    urlAddPort: true
    # protocolUseSSL: true
    # path: /var/run/hedgedoc/hedgedoc.sock
    sessionSecret: "{{ inventory_hostname | hash('sha1') }}"
    allowAnonymous: false
    # allowEmailRegister: false
    db:
      ## dialect: mysql / mariadb / postgres / sqlite
      dialect: mariadb
      host: localhost
      port: 3306
      database: hedgedoc
      username: hedgedoc_user
      password: hedgedoc_password
      ## MySQL or MariaDB database setting for localhost
      encoding: utf8mb4
      collation: utf8mb4_general_ci
